node {
    checkout scm

    def infraImage

    stage('build image') {
        infraImage = docker.build("test:${env.BUILD_ID}", "application-one")
    }

    infraImage.inside {
        sh 'ls'
        sh 'cdk ls'
    }
}